import{r as p,a as D,d as $,s as oe,b as R,c as le,R as P,e as O,f as ce,g as de,h as ue,i as he,j as N,k as me,l as ye}from"./utils-BDhfBN4V.js";import{r as ge}from"./react-vendor-DIvR2xoL.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(n){if(n.ep)return;n.ep=!0;const t=a(n);fetch(n.href,t)}})();var q={exports:{}},_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pe=p,xe=Symbol.for("react.element"),fe=Symbol.for("react.fragment"),be=Object.prototype.hasOwnProperty,ve=pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,we={key:!0,ref:!0,__self:!0,__source:!0};function Y(i,s,a){var r,n={},t=null,o=null;a!==void 0&&(t=""+a),s.key!==void 0&&(t=""+s.key),s.ref!==void 0&&(o=s.ref);for(r in s)be.call(s,r)&&!we.hasOwnProperty(r)&&(n[r]=s[r]);if(i&&i.defaultProps)for(r in s=i.defaultProps,s)n[r]===void 0&&(n[r]=s[r]);return{$$typeof:xe,type:i,key:t,ref:o,props:n,_owner:ve.current}}_.Fragment=fe;_.jsx=Y;_.jsxs=Y;q.exports=_;var e=q.exports,T={},H=ge;T.createRoot=H.createRoot,T.hydrateRoot=H.hydrateRoot;const je={};function ke(i,s){let a;try{a=i()}catch{return}return{getItem:n=>{var t;const o=x=>x===null?null:JSON.parse(x,void 0),l=(t=a.getItem(n))!=null?t:null;return l instanceof Promise?l.then(o):o(l)},setItem:(n,t)=>a.setItem(n,JSON.stringify(t,void 0)),removeItem:n=>a.removeItem(n)}}const C=i=>s=>{try{const a=i(s);return a instanceof Promise?a:{then(r){return C(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return C(r)(a)}}}},Ne=(i,s)=>(a,r,n)=>{let t={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,v)=>({...v,...m}),...s},o=!1;const l=new Set,x=new Set;let d;try{d=t.getStorage()}catch{}if(!d)return i((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),a(...m)},r,n);const g=C(t.serialize),f=()=>{const m=t.partialize({...r()});let v;const h=g({state:m,version:t.version}).then(j=>d.setItem(t.name,j)).catch(j=>{v=j});if(v)throw v;return h},u=n.setState;n.setState=(m,v)=>{u(m,v),f()};const c=i((...m)=>{a(...m),f()},r,n);let b;const y=()=>{var m;if(!d)return;o=!1,l.forEach(h=>h(r()));const v=((m=t.onRehydrateStorage)==null?void 0:m.call(t,r()))||void 0;return C(d.getItem.bind(d))(t.name).then(h=>{if(h)return t.deserialize(h)}).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==t.version){if(t.migrate)return t.migrate(h.state,h.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return h.state}).then(h=>{var j;return b=t.merge(h,(j=r())!=null?j:c),a(b,!0),f()}).then(()=>{v==null||v(b,void 0),o=!0,x.forEach(h=>h(b))}).catch(h=>{v==null||v(void 0,h)})};return n.persist={setOptions:m=>{t={...t,...m},m.getStorage&&(d=m.getStorage())},clearStorage:()=>{d==null||d.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:m=>(l.add(m),()=>{l.delete(m)}),onFinishHydration:m=>(x.add(m),()=>{x.delete(m)})},y(),b||c},Pe=(i,s)=>(a,r,n)=>{let t={storage:ke(()=>localStorage),partialize:y=>y,version:0,merge:(y,m)=>({...m,...y}),...s},o=!1;const l=new Set,x=new Set;let d=t.storage;if(!d)return i((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),a(...y)},r,n);const g=()=>{const y=t.partialize({...r()});return d.setItem(t.name,{state:y,version:t.version})},f=n.setState;n.setState=(y,m)=>{f(y,m),g()};const u=i((...y)=>{a(...y),g()},r,n);n.getInitialState=()=>u;let c;const b=()=>{var y,m;if(!d)return;o=!1,l.forEach(h=>{var j;return h((j=r())!=null?j:u)});const v=((m=t.onRehydrateStorage)==null?void 0:m.call(t,(y=r())!=null?y:u))||void 0;return C(d.getItem.bind(d))(t.name).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==t.version){if(t.migrate)return[!0,t.migrate(h.state,h.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,h.state];return[!1,void 0]}).then(h=>{var j;const[M,L]=h;if(c=t.merge(L,(j=r())!=null?j:u),a(c,!0),M)return g()}).then(()=>{v==null||v(c,void 0),c=r(),o=!0,x.forEach(h=>h(c))}).catch(h=>{v==null||v(void 0,h)})};return n.persist={setOptions:y=>{t={...t,...y},y.storage&&(d=y.storage)},clearStorage:()=>{d==null||d.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(x.add(y),()=>{x.delete(y)})},t.skipHydration||b(),c||u},Se=(i,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((je?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Ne(i,s)):Pe(i,s),Ce=Se,De=14,_e=5,Ee=1,Me=5,Le=21,Ie=35;function Ae(i){if(i.length===0)return 28;let s=0,a=0;return i.forEach((r,n)=>{const t=(n+1)/i.length,o=Math.max(Le,Math.min(Ie,r));s+=o*t,a+=t}),Math.round(s/a)}function B(i){if(i.length===0)return{variance:0,stdDev:0,average:28};const s=i.reduce((n,t)=>n+t,0)/i.length,a=i.reduce((n,t)=>n+Math.pow(t-s,2),0)/i.length,r=Math.sqrt(a);return{variance:a,stdDev:r,average:s}}function E(i){const{stdDev:s,average:a}=B(i.cycleLengths),r=s/a,n=Math.max(.3,1-r);return Math.min(1,Math.max(.3,n))}function J(i,s){const a=oe(new Date(i)),r=s.cycleLengths.length>0?Ae(s.cycleLengths):28,n=D(a,r),t=D(n,Me),o=R(n,De),l=R(o,_e),x=D(o,Ee),d=E(s);return{nextPeriodStart:n,nextPeriodEnd:t,ovulationDate:o,fertileWindowStart:l,fertileWindowEnd:x,confidence:d}}function $e(i){if(i.length===0)return 28;const s={};let a=0,r=28;return i.forEach(n=>{s[n]=(s[n]||0)+1,s[n]>a&&(a=s[n],r=n)}),r}function Te(i){if(i.entries.length<2)return 0;const s=i.entries.sort((r,n)=>new Date(r.lastPeriodStart).getTime()-new Date(n.lastPeriodStart).getTime());let a=0;for(let r=0;r<s.length-1;r++){const n=s[r],t=s[r+1],o=D(new Date(n.lastPeriodStart),n.cycleLength),l=new Date(t.lastPeriodStart);Math.abs($(o,l))<=2&&a++}return a/(s.length-1)*100}const Re={darkMode:!1,cycleLengthDefault:28,cycleStartDay:"sunday",notificationsEnabled:!0,pinLockEnabled:!1},Oe="period-tracker-store",K=le()(Ce((i,s)=>({cycleHistory:{entries:[],averageCycleLength:28,cycleLengths:[]},currentPrediction:null,preferences:Re,isPinLocked:!1,darkMode:!1,addCycleEntry:a=>{i(r=>{const n=[...r.cycleHistory.entries,a],t=z(n);return{cycleHistory:{entries:n,averageCycleLength:t.length>0?Math.round(t.reduce((o,l)=>o+l)/t.length):28,cycleLengths:t}}}),s().generatePrediction(a.lastPeriodStart,a.cycleLength)},updatePreferences:a=>{i(r=>({preferences:{...r.preferences,...a}}))},setPinLocked:a=>{i({isPinLocked:a})},setDarkMode:a=>{i({darkMode:a}),s().updatePreferences({darkMode:a})},generatePrediction:a=>{i(r=>({currentPrediction:J(a,r.cycleHistory)}))},getAnalytics:()=>{const a=s(),{variance:r,average:n,stdDev:t}=B(a.cycleHistory.cycleLengths),o=$e(a.cycleHistory.cycleLengths),l=E(a.cycleHistory),x=Te(a.cycleHistory);return{averageCycleLength:n,cycleLengthVariance:r,mostCommonLength:o,predictablityScore:l*100,periodDuration:5,ovulationVariance:t,historicalAccuracy:x}},deleteCycleEntry:a=>{i(r=>{const n=r.cycleHistory.entries.filter(o=>o.id!==a),t=z(n);return{cycleHistory:{entries:n,averageCycleLength:t.length>0?Math.round(t.reduce((o,l)=>o+l)/t.length):28,cycleLengths:t}}})}}),{name:Oe,version:1,serialize:i=>JSON.stringify(i),deserialize:i=>{const s=JSON.parse(i);return s.state.cycleHistory.entries&&(s.state.cycleHistory.entries=s.state.cycleHistory.entries.map(a=>({...a,lastPeriodStart:new Date(a.lastPeriodStart),createdAt:new Date(a.createdAt)}))),s.state.currentPrediction&&(s.state.currentPrediction={...s.state.currentPrediction,nextPeriodStart:new Date(s.state.currentPrediction.nextPeriodStart),nextPeriodEnd:new Date(s.state.currentPrediction.nextPeriodEnd),ovulationDate:new Date(s.state.currentPrediction.ovulationDate),fertileWindowStart:new Date(s.state.currentPrediction.fertileWindowStart),fertileWindowEnd:new Date(s.state.currentPrediction.fertileWindowEnd)}),s.state}}));function z(i){if(i.length<2)return[];const s=[...i].sort((r,n)=>new Date(r.lastPeriodStart).getTime()-new Date(n.lastPeriodStart).getTime()),a=[];for(let r=0;r<s.length-1;r++){const n=new Date(s[r].lastPeriodStart),t=new Date(s[r+1].lastPeriodStart),o=Math.round((t.getTime()-n.getTime())/(1e3*60*60*24));o>=21&&o<=35&&a.push(o)}return a}const A="pt-pin-hash",He=3,ze=5*60*1e3;function Fe(){const{preferences:i,isPinLocked:s,setPinLocked:a,updatePreferences:r}=K(),n=(u,c)=>{switch(c.type){case"set_attempts":return{...u,pinAttempts:c.value};case"set_lockout_time":return{...u,lockoutTime:c.value};case"reset_security":return{pinAttempts:0,lockoutTime:null};default:return u}},[t,o]=p.useReducer(n,{pinAttempts:0,lockoutTime:null}),l=p.useCallback(u=>Buffer.from(u).toString("base64"),[]),x=p.useCallback(u=>{if(u.length!==4||!/^\d+$/.test(u))return!1;const c=l(u);return localStorage.setItem(A,c),r({pinLockEnabled:!0,privacyPin:u}),!0},[l,r]),d=p.useCallback(u=>{if(t.lockoutTime&&Date.now()<t.lockoutTime)return!1;const c=localStorage.getItem(A);if(!c)return!1;if(l(u)===c)return o({type:"reset_security"}),a(!1),!0;const y=t.pinAttempts+1;return o({type:"set_attempts",value:y}),y>=He&&o({type:"set_lockout_time",value:Date.now()+ze}),!1},[l,t.lockoutTime,t.pinAttempts,a,o]),g=p.useCallback(()=>{localStorage.removeItem(A),r({pinLockEnabled:!1,privacyPin:void 0}),a(!1)},[r,a]),f=p.useCallback(()=>t.lockoutTime?Math.max(0,t.lockoutTime-Date.now()):0,[t.lockoutTime]);return{isPinLocked:s,pinLockEnabled:i.pinLockEnabled,setPin:x,verifyPin:d,disablePin:g,pinAttempts:t.pinAttempts,isLockedOut:t.lockoutTime!==null&&Date.now()<t.lockoutTime,remainingLockoutTime:f()}}function Ue(i,s){return p.useMemo(()=>{if(!i)return{prediction:null,confidence:0};const a=J(i,s),r=E(s);return{prediction:a,confidence:r}},[i,s])}function We(i){return p.useMemo(()=>{const s=E(i);return s>=.8?"Very High":s>=.6?"High":s>=.4?"Medium":"Low"},[i])}var qe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ye=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w=(i,s)=>{const a=p.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:o,children:l,...x},d)=>p.createElement("svg",{ref:d,...qe,width:n,height:n,stroke:r,strokeWidth:o?Number(t)*24/Number(n):t,className:`lucide lucide-${Ye(i)}`,...x},[...s.map(([g,f])=>p.createElement(g,f)),...(Array.isArray(l)?l:[l])||[]]));return a.displayName=`${i}`,a},F=w("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),U=w("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Be=w("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Je=w("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ke=w("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ve=w("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Xe=w("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ze=w("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),W=w("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),V=w("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Ge=w("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Qe=w("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),X=w("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),et=w("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),tt=w("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),rt=w("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),nt=w("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Z=P.memo(({onUnlock:i,isLocked:s,darkMode:a,isLockedOut:r=!1,remainingTime:n=0})=>{const t=(g,f)=>{switch(f.type){case"set_pin":return{...g,pin:f.value};case"toggle_show":return{...g,showPin:!g.showPin};case"set_error":return{...g,error:f.value};case"reset_pin":return{...g,pin:"",error:""};default:return g}},[o,l]=p.useReducer(t,{pin:"",showPin:!1,error:""}),x=p.useCallback(g=>{const f=g.target.value.replace(/\D/g,"").slice(0,4);l({type:"set_pin",value:f}),l({type:"set_error",value:""})},[l]),d=p.useCallback(g=>{if(g.preventDefault(),r){l({type:"set_error",value:`Too many attempts. Try again in ${Math.ceil(n/1e3)} seconds.`});return}if(o.pin.length!==4){l({type:"set_error",value:"PIN must be 4 digits"});return}i(o.pin)?l({type:"reset_pin"}):(l({type:"set_error",value:"Incorrect PIN"}),l({type:"set_pin",value:""}))},[o.pin,i,r,n,l]);return s?e.jsx("div",{className:`fixed inset-0 flex items-center justify-center p-4 z-50 ${a?"bg-black/50":"bg-gray-900/50"}`,role:"dialog","aria-modal":"true","aria-label":"PIN lock dialog",children:e.jsxs("div",{className:`w-full max-w-sm rounded-lg shadow-2xl p-8 ${a?"bg-gray-800 text-white":"bg-white text-gray-900"}`,children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:`p-3 rounded-full ${a?"bg-pink-600":"bg-pink-500"}`,children:e.jsx(V,{size:32,className:"text-white"})})}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-2",children:"Enter PIN"}),e.jsx("p",{className:`text-center text-sm mb-6 ${a?"text-gray-300":"text-gray-600"}`,children:"Your data is protected with a privacy PIN"}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o.showPin?"text":"password",value:o.pin,onChange:x,placeholder:"••••",maxLength:4,disabled:r,autoFocus:!0,"aria-label":"PIN input",className:`w-full px-4 py-2 text-center text-2xl font-bold tracking-widest rounded-lg border-2 transition ${a?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-gray-100 border-gray-300 text-gray-900 placeholder-gray-400"} ${o.error&&"border-red-500"} ${r&&"opacity-50 cursor-not-allowed"}`}),e.jsx("button",{type:"button",onClick:()=>l({type:"toggle_show"}),className:"absolute right-3 top-1/2 -translate-y-1/2","aria-label":o.showPin?"Hide PIN":"Show PIN",children:o.showPin?e.jsx(Ve,{size:20}):e.jsx(Xe,{size:20})})]}),o.error&&e.jsx("p",{className:"text-sm text-red-500 font-medium text-center",role:"alert",children:o.error}),e.jsx("button",{type:"submit",disabled:o.pin.length!==4||r,className:`w-full py-2 rounded-lg font-bold transition ${o.pin.length===4&&!r?"bg-pink-500 text-white hover:bg-pink-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Unlock"})]})]})}):null});Z.displayName="PinLock";const G=P.memo(({isOpen:i,onClose:s,preferences:a,onPreferencesChange:r,onSetPin:n,onDisablePin:t,onToggleDarkMode:o,darkMode:l})=>{const x=(u,c)=>{switch(c.type){case"set_new_pin":return{...u,newPin:c.value};case"set_pin_error":return{...u,pinError:c.value};case"reset_form":return{newPin:"",pinError:""};default:return u}},[d,g]=p.useReducer(x,{newPin:"",pinError:""}),f=p.useCallback(()=>{if(d.newPin.length!==4||!/^\d+$/.test(d.newPin)){g({type:"set_pin_error",value:"PIN must be 4 digits"});return}n(d.newPin)?g({type:"reset_form"}):g({type:"set_pin_error",value:"Failed to set PIN"})},[d.newPin,n,g]);return i?e.jsx("div",{className:`fixed inset-0 z-40 flex justify-end ${l?"bg-black/50":"bg-gray-900/50"}`,onClick:s,role:"dialog","aria-modal":"true","aria-label":"Settings",children:e.jsxs("div",{className:`w-full max-w-md h-full overflow-y-auto shadow-lg ${l?"bg-gray-800 text-white":"bg-white text-gray-900"}`,onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${l?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(X,{size:28}),"Settings"]}),e.jsx("button",{onClick:s,"aria-label":"Close settings",className:`p-2 rounded-lg transition ${l?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(nt,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:`border-b pb-6 ${l?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[l?e.jsx(Ge,{size:20}):e.jsx(et,{size:20}),"Appearance"]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:u=>o(u.target.checked),className:"w-4 h-4 rounded","aria-label":"Dark mode"}),e.jsx("span",{children:"Dark Mode"})]})]}),e.jsxs("div",{className:`border-b pb-6 ${l?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Cycle Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium mb-2 block",children:"Default Cycle Length"}),e.jsx("input",{type:"number",min:"21",max:"35",value:a.cycleLengthDefault,onChange:u=>r({cycleLengthDefault:parseInt(u.target.value)}),className:`w-full px-3 py-2 rounded-lg border transition ${l?"bg-gray-700 border-gray-600 text-white":"bg-gray-50 border-gray-300"}`})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.notificationsEnabled,onChange:u=>r({notificationsEnabled:u.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{children:"Enable Notifications"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(V,{size:20}),"Privacy PIN"]}),a.pinLockEnabled?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium mb-3",children:"✓ Privacy PIN is enabled"}),e.jsx("button",{onClick:t,className:"w-full py-2 rounded-lg font-medium transition text-red-600 hover:bg-red-50 dark:hover:bg-red-900 dark:text-red-400",children:"Disable PIN"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm opacity-75",children:"Set a 4-digit PIN to lock your data"}),e.jsx("input",{type:"password",placeholder:"Enter 4-digit PIN",maxLength:4,value:d.newPin,onChange:u=>{g({type:"set_new_pin",value:u.target.value.replace(/\D/g,"")}),g({type:"set_pin_error",value:""})},className:`w-full px-3 py-2 rounded-lg border transition ${l?"bg-gray-700 border-gray-600 text-white":"bg-gray-50 border-gray-300"}`}),d.pinError&&e.jsx("p",{className:"text-sm text-red-500",role:"alert",children:d.pinError}),e.jsx("button",{onClick:f,disabled:d.newPin.length!==4,className:`w-full py-2 rounded-lg font-medium transition ${d.newPin.length===4?"bg-pink-500 text-white hover:bg-pink-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Set PIN"})]})]})]})]})}):null});G.displayName="SettingsPanel";const Q=P.memo(({selectedDate:i,onDateSelect:s,maxDate:a=new Date,label:r="Select Date"})=>{const[n,t]=p.useState(new Date),o=p.useMemo(()=>{const c=O(n),b=ce(n);return de({start:c,end:b})},[n]),l=p.useMemo(()=>O(n).getDay(),[n]),x=p.useCallback(()=>{t(c=>ue(c,1))},[]),d=p.useCallback(()=>{t(c=>he(c,1))},[]),g=p.useCallback(c=>{c<=a&&s(c)},[a,s]),f=p.useCallback((c,b)=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),g(b))},[g]),u=Array.from({length:l});return e.jsxs("div",{className:"w-full max-w-sm mx-auto p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-4",children:r}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:x,"aria-label":"Previous month",className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition",children:e.jsx(Je,{size:20})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:N(n,"MMMM yyyy")}),e.jsx("button",{onClick:d,"aria-label":"Next month",className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition",children:e.jsx(Ke,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(c=>e.jsx("div",{className:"text-center text-xs font-semibold text-gray-600 dark:text-gray-400 py-2",children:c},c)),u.map((c,b)=>e.jsx("div",{},`padding-${b}`)),o.map(c=>{const b=i?me(c,i):!1,y=c>a,m=ye(c,n);return e.jsx("button",{onClick:()=>g(c),onKeyDown:v=>f(v,c),disabled:y,"aria-pressed":b,"aria-label":N(c,"EEEE, MMMM d, yyyy"),className:`
                  p-2 rounded-lg text-sm font-medium transition
                  ${!m&&"opacity-30"}
                  ${y&&"opacity-40 cursor-not-allowed"}
                  ${b?"bg-pink-600 text-white dark:bg-pink-500":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-900 dark:text-gray-100"}
                `,children:N(c,"d")},c.toISOString())})]}),i&&e.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:["Selected: ",N(i,"MMMM d, yyyy")]})]})});Q.displayName="DatePicker";const ee=P.memo(({prediction:i,confidenceLevel:s,darkMode:a})=>{const r=p.useMemo(()=>Math.ceil($(i.nextPeriodStart,new Date)),[i.nextPeriodStart]),n=p.useMemo(()=>Math.ceil($(i.ovulationDate,new Date)),[i.ovulationDate]);return e.jsxs("div",{className:`w-full max-w-2xl rounded-lg shadow-lg overflow-hidden ${a?"bg-gray-800 text-white":"bg-white text-gray-900"}`,role:"region","aria-label":"Period prediction results",children:[e.jsx("div",{className:`px-6 py-4 ${a?"bg-pink-600":"bg-pink-500"}`,children:e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Be,{size:24}),"Your Cycle Predictions"]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium opacity-75",children:"Prediction Confidence"}),e.jsx("p",{className:"text-lg font-semibold",children:s})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-pink-500 to-rose-500 flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-bold",children:[Math.round(i.confidence*100),"%"]})})})]}),e.jsxs("div",{className:`p-4 rounded-lg ${a?"bg-red-900 bg-opacity-30":"bg-red-50"}`,children:[e.jsxs("p",{className:"text-sm font-medium opacity-75 flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-red-600"}),"Next Period"]}),e.jsx("p",{className:"text-2xl font-bold",children:N(i.nextPeriodStart,"MMMM d, yyyy")}),e.jsx("p",{className:"text-sm opacity-75 mt-1",children:r>0?`In ${r} days`:"Today"}),e.jsxs("p",{className:"text-xs opacity-50 mt-2",children:["Expected duration: ",N(i.nextPeriodEnd,"MMM d")]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${a?"bg-amber-900 bg-opacity-30":"bg-amber-50"}`,children:[e.jsxs("p",{className:"text-sm font-medium opacity-75 flex items-center gap-2 mb-2",children:[e.jsx(Ze,{size:16,className:"text-amber-600"}),"Ovulation Date"]}),e.jsx("p",{className:"text-2xl font-bold",children:N(i.ovulationDate,"MMMM d, yyyy")}),e.jsx("p",{className:"text-sm opacity-75 mt-1",children:n>0?`In ${n} days`:"Today"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${a?"bg-green-900 bg-opacity-30":"bg-green-50"}`,children:[e.jsxs("p",{className:"text-sm font-medium opacity-75 flex items-center gap-2 mb-2",children:[e.jsx(rt,{size:16,className:"text-green-600"}),"Fertile Window"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-75",children:"From"}),e.jsx("p",{className:"font-semibold",children:N(i.fertileWindowStart,"MMM d")})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs opacity-50",children:"to"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-75",children:"To"}),e.jsx("p",{className:"font-semibold",children:N(i.fertileWindowEnd,"MMM d")})]})]})]}),e.jsxs("div",{className:`p-3 rounded text-xs ${a?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-700"}`,children:[e.jsx("p",{className:"font-semibold mb-1",children:"Note:"}),e.jsx("p",{children:"These predictions are estimates based on your cycle history. For medical concerns, please consult with a healthcare provider."})]})]})]})});ee.displayName="PredictionCard";const te=P.memo(({analytics:i,darkMode:s})=>{const a=p.useMemo(()=>[{label:"Average Cycle",value:`${i.averageCycleLength} days`,icon:W,color:"pink"},{label:"Predictability",value:`${i.predictablityScore.toFixed(0)}%`,icon:U,color:"purple"},{label:"Accuracy",value:`${i.historicalAccuracy.toFixed(0)}%`,icon:F,color:"green"},{label:"Variance",value:`±${i.ovulationVariance.toFixed(1)} days`,icon:W,color:"blue"}],[i]),r={pink:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-200",purple:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-200",green:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200",blue:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200"};return e.jsxs("div",{className:`w-full rounded-lg shadow-lg p-6 ${s?"bg-gray-800 text-white":"bg-white text-gray-900"}`,role:"region","aria-label":"Cycle Analytics Dashboard",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(U,{size:28}),"Your Analytics"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:a.map(n=>{const t=n.icon,o=r[n.color];return e.jsxs("div",{className:`p-4 rounded-lg flex items-start gap-3 ${s?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`p-3 rounded-lg ${o}`,children:e.jsx(t,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${s?"text-gray-300":"text-gray-600"}`,children:n.label}),e.jsx("p",{className:"text-xl font-bold mt-1",children:n.value})]})]},n.label)})}),e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-blue-900 bg-opacity-30":"bg-blue-50"}`,children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(F,{size:18}),"Insights"]}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsxs("li",{children:["• Your cycle length is"," ",e.jsx("strong",{children:i.averageCycleLength>=28&&i.averageCycleLength<=32?"consistent and normal":"variable"})]}),e.jsxs("li",{children:["• Prediction confidence is"," ",e.jsx("strong",{children:i.predictablityScore>=80?"very high":i.predictablityScore>=60?"good":"moderate"})]}),e.jsxs("li",{children:["• Historical accuracy: ",i.historicalAccuracy.toFixed(0),"% of predictions were within 2 days"]})]})]})]})});te.displayName="AnalyticsDashboard";const re=P.memo(({entries:i,onDelete:s,onAddNew:a,darkMode:r})=>{const n=p.useCallback(o=>{confirm("Are you sure you want to delete this entry?")&&s(o)},[s]),t=P.useMemo(()=>[...i].sort((o,l)=>new Date(l.lastPeriodStart).getTime()-new Date(o.lastPeriodStart).getTime()),[i]);return e.jsxs("div",{className:`w-full max-w-2xl rounded-lg shadow-lg overflow-hidden ${r?"bg-gray-800 text-white":"bg-white text-gray-900"}`,role:"region","aria-label":"Cycle history",children:[e.jsxs("div",{className:`flex items-center justify-between px-6 py-4 border-b ${r?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h2",{className:"text-xl font-bold",children:"Cycle History"}),e.jsxs("button",{onClick:a,className:`flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition ${r?"bg-pink-600 hover:bg-pink-700 text-white":"bg-pink-500 hover:bg-pink-600 text-white"}`,"aria-label":"Add new cycle entry",children:[e.jsx(Qe,{size:18}),"Add Entry"]})]}),e.jsx("div",{className:r?"divide-gray-700":"divide-gray-200",children:t.length===0?e.jsx("div",{className:"p-6 text-center opacity-50",children:e.jsx("p",{children:"No cycle entries yet. Add your first entry to get started!"})}):t.map(o=>e.jsx("div",{className:`p-4 transition border-b ${r?"hover:bg-gray-700 border-gray-700":"hover:bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:N(new Date(o.lastPeriodStart),"MMMM d, yyyy")}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm opacity-75",children:[e.jsxs("span",{children:["Cycle: ",o.cycleLength," days"]}),o.notes&&e.jsxs("span",{children:["Note: ",o.notes]})]})]}),e.jsx("button",{onClick:()=>n(o.id),className:`p-2 text-red-500 rounded-lg transition ${r?"hover:bg-red-900":"hover:bg-red-50"}`,"aria-label":`Delete entry from ${N(new Date(o.lastPeriodStart),"MMMM d, yyyy")}`,children:e.jsx(tt,{size:18})})]})},o.id))})]})});re.displayName="CycleHistory";const st=()=>{const i=(k,S)=>{switch(S.type){case"set_selected_date":return{...k,selectedDate:S.value};case"set_settings_open":return{...k,settingsOpen:S.value};default:return k}},[s,a]=p.useReducer(i,{selectedDate:null,settingsOpen:!1}),{cycleHistory:r,preferences:n,darkMode:t,addCycleEntry:o,updatePreferences:l,setDarkMode:x,getAnalytics:d,deleteCycleEntry:g}=K(),{isPinLocked:f,pinLockEnabled:u,setPin:c,verifyPin:b,disablePin:y,isLockedOut:m,remainingLockoutTime:v}=Fe(),{prediction:h}=Ue(s.selectedDate,r),j=We(r),M=d();p.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const L=p.useCallback(()=>{if(!s.selectedDate){alert("Please select a date first");return}let k=n.cycleLengthDefault;if(r.entries.length>0){const ae=r.entries[r.entries.length-1],ie=new Date(ae.lastPeriodStart),I=Math.round((s.selectedDate.getTime()-ie.getTime())/(1e3*60*60*24));I>=21&&I<=35&&(k=I)}const S={id:Math.random().toString(36).substring(2,9),lastPeriodStart:s.selectedDate,cycleLength:k,createdAt:new Date};o(S),a({type:"set_selected_date",value:null})},[s.selectedDate,r.entries,n.cycleLengthDefault,o,a]),se=p.useCallback(k=>b(k),[b]);return e.jsxs("div",{className:`min-h-screen transition-colors ${t?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("header",{className:`border-b sticky top-0 z-30 ${t?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Period Tracker"}),e.jsx("button",{onClick:()=>a({type:"set_settings_open",value:!0}),className:`p-2 rounded-lg transition ${t?"hover:bg-gray-700":"hover:bg-gray-100"}`,"aria-label":"Open settings",children:e.jsx(X,{size:24})})]})}),u&&e.jsx(Z,{isLocked:f,onUnlock:se,darkMode:t,isLockedOut:m,remainingTime:v}),e.jsx(G,{isOpen:s.settingsOpen,onClose:()=>a({type:"set_settings_open",value:!1}),preferences:n,onPreferencesChange:l,onSetPin:c,onDisablePin:y,onToggleDarkMode:x,darkMode:t}),!f&&e.jsx("main",{className:"max-w-6xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx(Q,{selectedDate:s.selectedDate,onDateSelect:k=>a({type:"set_selected_date",value:k}),label:"Last Period Start Date"}),e.jsx("button",{onClick:L,disabled:!s.selectedDate,className:`w-full mt-4 py-3 rounded-lg font-bold transition ${s.selectedDate?"bg-pink-500 text-white hover:bg-pink-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Add Cycle Entry"})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[h&&e.jsx(ee,{prediction:h,confidenceLevel:j,darkMode:t}),r.entries.length>0&&e.jsx(te,{analytics:M,darkMode:t}),e.jsx(re,{entries:r.entries,onDelete:g,onAddNew:()=>{var k;(k=document.querySelector('input[type="date"]'))==null||k.focus()},darkMode:t})]})]})})]})},ne=document.getElementById("root");if(!ne)throw new Error("Root element not found");T.createRoot(ne).render(e.jsx(P.StrictMode,{children:e.jsx(st,{})}));
//# sourceMappingURL=index-B1Gfq7lV.js.map
